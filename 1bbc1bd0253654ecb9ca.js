(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1015:function(e,t,n){"use strict";var r=n(19),o=n(69).findIndex,c=n(217),l=!0;"findIndex"in[]&&Array(1).findIndex(function(){l=!1}),r({target:"Array",proto:!0,forced:l},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c("findIndex")},1016:function(e,t,n){"use strict";var r=n(907);n.n(r).a},1029:function(e,t,n){"use strict";n.r(t);n(113),n(114),n(115),n(99),n(120),n(121),n(1015),n(515),n(159),n(85),n(133),n(385),n(384),n(97),n(39),n(887),n(55),n(187),n(134),n(382),n(509),n(132),n(61),n(53);var r=n(9),o=n(13),c=n(22),l=n(15),f=n(23),m=n(3),h=n(24),d=n(5),v=n(42),k=n(98),x=n(56),w=n(216),y=n(971),O=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},j=Object(k.d)("user"),_=Object(k.d)("page");function P(e){return e instanceof Set?P(Array.from(e)):e[Math.floor(Math.random()*e.length)]}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<e}function I(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var S,A=new Set;function W(e){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(S=new WebSocket("ws://localhost:".concat(t))).onclose=function(){console.log("socket closed"),S=void 0},e.next=4,Object(x.m)(S,"open",1e4);case 4:console.log("connected to filler");case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.readyState===WebSocket.OPEN){e.next=3;break}return e.next=3,Object(x.m)(S,"open");case 3:return S.send("give"),e.next=6,Object(x.m)(S,"message");case 6:return t=e.sent,e.abrupt("return",t.data);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e){return B.apply(this,arguments)}function B(){return(B=Object(m.a)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=4;break}return console.log("opening filler sock"),e.next=4,W(t);case 4:return e.next=6,Promise.race([M(),Object(x.m)(S,"close")]);case 6:if("string"!=typeof(n=e.sent)){e.next=11;break}return e.abrupt("return",n);case 11:return console.log("socket closed during generation"),e.next=14,Object(x.k)(1e3);case 14:return e.abrupt("return",$(t));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){for(var e=P(A),i=0;i<I(0,I(1,12));i++)e+=" "+P(A);return e[0].toUpperCase()+e.slice(1)}A.add("plopp");var L=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).apply(this,arguments))).isLoading=!1,e.error=null,e.numWorkers=1,e.numActions=1e4,e.sleepTime=500,e.fillerPort=4242,e.blog=null,e.knownPosts=[],e.placegenWorkers=[],e.imageBank=[],e.workers=[],e}return Object(f.a)(t,e),Object(o.a)(t,[{key:"mounted",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.getBlog(this.accountName);case 2:return this.blog=e.sent,e.next=5,this.$api.getBlogPosts(this.accountName);case 5:for(e.t0=function(p){return new w.d(p)},this.knownPosts=e.sent.posts.map(e.t0),t=function(e){var t={id:e,image:null,error:function(e){console.log("placegen error",e),t.image=r.nextPlacegen()}};t.result=function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.imageBank.push({url:t.image,info:{width:n.size.width,height:n.size.height,placeholder:["geometrize_triangles",n.placeholder]}}),e.next=3,Object(x.k)(1e3);case 3:if(!(r.imageBank.length>200)){e.next=6;break}return e.next=6,Object(x.k)(2e4);case 6:t.image=r.nextPlacegen();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.placegenWorkers.push(t),t.image=r.nextPlacegen()},n=0;n<2;n++)t(n);this.nextPlacegen();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSlug",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(title){var t,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(s){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s.length>1,!e.t0){e.next=6;break}return e.next=4,o.$api.getPostRef(o.accountName,s);case 4:e.t1=e.sent,e.t0=null==e.t1;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n=Object(x.l)(title),r=0;case 3:return e.next=5,t(n);case 5:if(e.sent){e.next=9;break}n=Object(x.l)("".concat(++r).concat(title)),e.next=3;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"nextPlacegen",value:function(){var e=I(800,1700),t=I(450,900);if(R(.25)){var n=t;t=e,e=n}var r=I(0,1084);return"https://picsum.photos/".concat(e,"/").concat(t,"?image=").concat(r)}},{key:"spam_post",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(t){var progress,n,r,i,o,title,meta,body,c,l,f,m,h,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(progress=function(e){},n=[],R(.65)&&this.knownPosts.length>0)for(t.message="getting link references",r=function(i){var e=P(d.knownPosts),t=Object(x.c)(e.ref.permlink);e&&null==n.find(function(e){return Object(x.c)(e)===t})&&n.push(e.ref.permlink),d.knownPosts.splice(d.knownPosts.indexOf(e),1)},i=0;i<I(1,I(1,3));i++)r();return t.message="neural network churn",e.next=6,this.randomPost(n);case 6:return o=e.sent,title=o.title,meta=o.meta,body=o.body,e.next=12,this.getSlug(title.toLowerCase());case 12:return c=e.sent,l=P(this.categories),R(.1)&&(l=P(A).replace(/[^a-z]+/g,"").slice(0,12)),t.message="posting ".concat(c," in ").concat(l),e.next=18,this.$api.publish(progress,this.wallet,title,c,body,l,n,meta);case 18:if(f=e.sent,this.knownPosts.push(new w.d(f)),!(n.length>0&&R(.6))){e.next=36;break}return m=P(n),t.message="paying for links to ".concat(m.author,"/").concat(m.slug),h=(I(1e3,1e4)/1e4).toFixed(4)+" EOS",e.prev=24,e.next=27,this.$api.link(this.wallet,h,"".concat(this.accountName,"/").concat(c),"".concat(m.author,"/").concat(m.slug));case 27:e.next=36;break;case 29:return e.prev=29,e.t0=e.catch(24),t.message="link err ".concat(this.accountName,"/").concat(c," ").concat(m.author,"/").concat(m.slug),e.next=34,Object(x.k)(1e3);case 34:return e.next=36,this.$api.link(this.wallet,h,"".concat(this.accountName,"/").concat(c),"".concat(m.author,"/").concat(m.slug));case 36:case"end":return e.stop()}},e,this,[[24,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"spam_getdata",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(t){var n,r,o,c,l,f,m,h,d,v=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=I(100,500),t.message="fetching ".concat(n," posts"),e.next=4,this.$api.getTrending(void 0,P(this.categories),n);case 4:r=e.sent,o=r.posts.map(function(e){return new w.d(e)}),c=!0,l=!1,f=void 0,e.prev=9,m=function(){var e=d.value;if(v.knownPosts.find(function(t){return t.id===e.id}))return"continue";v.knownPosts.push(e)},h=o[Symbol.iterator]();case 12:if(c=(d=h.next()).done){e.next=19;break}if("continue"!==m()){e.next=16;break}return e.abrupt("continue",16);case 16:c=!0,e.next=12;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),l=!0,f=e.t0;case 25:e.prev=25,e.prev=26,c||null==h.return||h.return();case 28:if(e.prev=28,!l){e.next=31;break}throw f;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,this,[[9,21,25,33],[26,,28,32]])}));return function(t){return e.apply(this,arguments)}}()},{key:"spam_endorse",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=P(this.knownPosts)){e.next=4;break}return t.message="no eglible post",e.abrupt("return");case 4:return t.message="".concat(n.ref.permlink.author,"/").concat(n.ref.permlink.slug),r=(I(1e3,1e4)/1e4).toFixed(4)+" EOS",e.next=8,this.$api.endorse(this.wallet,r,n.ref.permlink);case 8:this.knownPosts.splice(this.knownPosts.indexOf(n),1);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dospam",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.spam_getdata({});case 2:for(this.workers=[],t=0;t<this.numWorkers;t++)this.workers.push({id:t,action:"init",message:""});return e.next=6,Promise.all(this.workers.map(function(e){return n.runWorker(e)}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"runWorker",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=["endorse","post"],r="",i=0;case 3:if(!(i<this.numActions)){e.next=25;break}return e.next=6,Object(x.k)(this.sleepTime);case 6:return o=P(n),this.knownPosts.length<10&&"getdata"!=r&&(o="getdata"),t.action=o,t.message="",e.prev=10,e.next=13,this["spam_".concat(o)](t);case 13:e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(10),t.message="ERROR: "+e.t0.message,console.warn(e.t0),e.next=21,Object(x.k)(5e3);case 21:r=o;case 22:i++,e.next=3;break;case 25:t.action="done",t.message="";case 27:case"end":return e.stop()}},e,this,[[10,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"spam",value:function(){var e=this;this.isLoading=!0,this.dospam().finally(function(){e.isLoading=!1})}},{key:"randomImage",value:function(meta){var img=P(this.imageBank);return meta.image_info.push({key:img.url,value:img.info}),img.url}},{key:"randomMdImage",value:function(meta){var e=this.randomImage(meta);return R()?"![".concat(E(),"](").concat(e,' "').concat(E(),'")'):"![".concat(E(),"](").concat(e,")")}},{key:"randomPost",value:function(){var e=Object(m.a)(regeneratorRuntime.mark(function e(t){var body,meta,n,r,o,title,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(this.fillerPort);case 2:for(body=e.sent,meta={summary:void 0,image:void 0,image_info:[]},body.replace(/[^a-z ]+/gi,"").split(" ").map(function(e){return e.replace(/\s+/g," ").trim().toLowerCase()}).filter(function(e){return e.length>4}).forEach(function(e){A.add(e)}),body=(body=body.replace(/∫/g,function(){return c.randomImage(meta)})).replace(/÷/g,function(){var e=encodeURIComponent(E());return P(["https://google.com/search?q=","http://www.wikipedia.org/search-redirect.php?search="])+e}),n=body.split("\n\n"),r=t.slice();r.length>0;)o="::"+Object(x.c)(r.pop())+"::",n.splice(I(1,n.length-1),0,o);return body=n.join("\n\n"),meta.image_info.length>0?meta.image=meta.image_info[0].key:R(.25)&&(meta.image=this.randomImage(meta)),meta.image_info=meta.image_info.filter(function(e,t,n){return n.findIndex(function(t){return t.key==e.key})==t}),title=body.slice(0,body.indexOf("\n")),body=body.slice(body.indexOf("\n")+1),title=title.slice(0,84),R()&&(body="# "+title+"\n\n"+body),e.abrupt("return",{title:title,meta:meta,body:body});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(d.default);O([j.Getter],L.prototype,"accountName",void 0),O([j.Getter],L.prototype,"wallet",void 0),O([_.Getter("categories")],L.prototype,"categories",void 0);var T=L=O([Object(v.b)({head:{title:"SPAM SPAM SPAM"},components:{Placegen:y.a}})],L),z=(n(1016),n(33)),component=Object(z.a)(T,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section dc-spamtest"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[e._v("Blockchain spammer")]),e._v(" "),n("h2",{staticClass:"subtitle"},[e._v("Use with care")]),e._v(" "),n("b-field",{attrs:{label:"Number of workers"}},[n("b-input",{attrs:{type:"number"},model:{value:e.numWorkers,callback:function(t){e.numWorkers=t},expression:"numWorkers"}})],1),e._v(" "),n("b-field",{attrs:{label:"Actions per worker"}},[n("b-input",{attrs:{type:"number"},model:{value:e.numActions,callback:function(t){e.numActions=t},expression:"numActions"}})],1),e._v(" "),n("b-field",{attrs:{label:"Sleep between"}},[n("b-input",{attrs:{type:"number"},model:{value:e.sleepTime,callback:function(t){e.sleepTime=t},expression:"sleepTime"}})],1),e._v(" "),n("b-field",{attrs:{label:"Filler port"}},[n("b-input",{attrs:{type:"number"},model:{value:e.fillerPort,callback:function(t){e.fillerPort=t},expression:"fillerPort"}})],1),e._v(" "),n("b-field",[n("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},on:{click:e.spam}},[e._v("\n                Do it!\n            ")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("Known posts: "+e._s(e.knownPosts.length))]),e._v(" "),n("p",[e._v("Num images ready: "+e._s(e.imageBank.length))]),e._v(" "),n("div",{staticClass:"place-workers"},e._l(e.placegenWorkers,function(e){return n("div",{key:e.id},[n("placegen",{attrs:{src:e.image},on:{result:e.result,error:e.error}})],1)}),0),e._v(" "),n("hr"),e._v(" "),e._l(e.workers,function(t){return n("div",{key:t.id,staticClass:"box"},[n("b",[e._v(e._s(t.action))]),e._v(" "+e._s(t.message)+"\n        ")])})],2)])},[],!1,null,"2724f64b",null);t.default=component.exports},887:function(e,t,n){"use strict";var r=n(513),o=n(514);e.exports=r("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},o)},907:function(e,t,n){},970:function(e,t,n){var r=n(28),o=n(383),c=!r.setImmediate||!r.clearImmediate;n(19)({global:!0,bind:!0,enumerable:!0,forced:c},{setImmediate:o.set,clearImmediate:o.clear})}}]);