(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{671:function(e,t,n){},677:function(e,t,n){"use strict";var r=n(12),o=n(13),c=n(24),l=n(16),d=n(25),h=n(26),f=n(8),v=n(44),m=n(271),y=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},k=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"mounted",value:function(){this.item.resolve()}},{key:"hasExtra",get:function(){return!!this.$slots.default}},{key:"loaded",get:function(){return!!this.item.preview}},{key:"permlink",get:function(){return this.isPreview?"":"/x/"+v.c(this.item.ref.permlink)}},{key:"authorlink",get:function(){return this.isPreview?"":"/x/".concat(this.item.ref.permlink.author)}},{key:"date",get:function(){return v.d(this.item.ref.timestamp)}}]),t}(f.c);y([Object(f.b)({required:!0})],k.prototype,"item",void 0),y([Object(f.b)({default:!1,type:Boolean})],k.prototype,"isPreview",void 0);var O=k=y([Object(f.a)({components:{LazyImage:m.a}})],k),j=(n(686),n(29)),component=Object(j.a)(O,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?n("span",{staticClass:"post-preview",class:{"has-image":!!e.item.preview.image}},[e.item.preview.image?n("span",{staticClass:"preview-image"},[n("n-link",{attrs:{to:e.permlink}},[n("lazy-image",{attrs:{"disable-animation":"",info:e.item.preview.imageInfo,src:e.item.preview.image,alt:e.item.preview.title}})],1)],1):e._e(),e._v(" "),n("span",{staticClass:"preview-bottom"},[n("span",{staticClass:"preview-right"},[n("span",{staticClass:"preview-title"},[n("n-link",{attrs:{to:e.permlink}},[e._v(e._s(e.item.preview.title))])],1),e._v(" "),n("span",{staticClass:"preview-summary"},[e._v("\n                "+e._s(e.item.preview.summary)+"\n            ")]),e._v(" "),n("span",{staticClass:"preview-info"},[n("span",{staticClass:"author"},[n("n-link",{attrs:{to:e.authorlink}},[e._v(e._s(e.item.preview.author))])],1),e._v(" "),n("span",{staticClass:"date"},[e._v("\n                    "+e._s(e.date)+"\n                ")])])]),e._v(" "),e.hasExtra?n("span",{staticClass:"preview-left"},[e._t("default")],2):e._e()])]):e._e()},[],!1,null,null,null);t.a=component.exports},685:function(e,t,n){"use strict";var r=n(675),o=n.n(r);function c(e,t){o.a.registerLanguage(e,t)}n.d(t,"a",function(){return o.a}),c("cpp",n(708)),c("arduino",n(709)),c("xml",n(710)),c("bash",n(711)),c("basic",n(712)),c("clojure",n(713)),c("clojure-repl",n(714)),c("cmake",n(715)),c("cs",n(716)),c("css",n(717)),c("d",n(718)),c("markdown",n(719)),c("dart",n(720)),c("delphi",n(721)),c("diff",n(722)),c("dns",n(723)),c("dockerfile",n(724)),c("elixir",n(725)),c("elm",n(726)),c("ruby",n(727)),c("erlang-repl",n(728)),c("erlang",n(729)),c("glsl",n(730)),c("haskell",n(731)),c("haxe",n(732)),c("java",n(733)),c("javascript",n(734)),c("json",n(735)),c("julia",n(736)),c("julia-repl",n(737)),c("kotlin",n(738)),c("less",n(739)),c("lisp",n(740)),c("livescript",n(741)),c("llvm",n(742)),c("lua",n(743)),c("makefile",n(744)),c("matlab",n(745)),c("perl",n(746)),c("nginx",n(747)),c("objectivec",n(748)),c("ocaml",n(749)),c("pgsql",n(750)),c("php",n(751)),c("powershell",n(752)),c("processing",n(753)),c("protobuf",n(754)),c("python",n(755)),c("rust",n(756)),c("scala",n(757)),c("scss",n(758)),c("shell",n(759)),c("stylus",n(760)),c("swift",n(761)),c("yaml",n(762)),c("typescript",n(763))},686:function(e,t,n){"use strict";var r=n(671);n.n(r).a},687:function(e,t,n){},688:function(e,t,n){},689:function(e,t,n){},690:function(e,t,n){},692:function(e,t,n){},781:function(e,t,n){"use strict";var r=n(687);n.n(r).a},782:function(e,t,n){"use strict";var r=n(688);n.n(r).a},783:function(e,t,n){"use strict";var r=n(689);n.n(r).a},788:function(e,t,n){"use strict";var r=n(690);n.n(r).a},791:function(e,t,n){"use strict";var r=n(692);n.n(r).a},805:function(e,t,n){"use strict";n.r(t);var r=n(804),o=(n(273),n(220),n(149),n(274),n(67),n(68),n(41),n(80),n(43),n(3)),c=n(12),l=n(13),d=n(24),h=n(16),f=n(25),v=(n(39),n(26)),m=n(8),y=n(96),k=n(44),O=(n(48),n(270),n(378),n(377),n(664)),j=n(665),w=n(784),_=n(669),x=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type;return function(e){return function(n,r){var o=n.selection,c=o.$cursor?o.$cursor.pos:o.$to.pos,l=t.create(e);r(n.tr.insert(c,l))}}}},{key:"name",get:function(){return"image"}},{key:"schema",get:function(){return{attrs:{src:{}},content:"inline*",parseDOM:[{tag:"figure",contentElement:"figcaption",getAttrs:function(e){var img=e.querySelector("img");return{src:img&&img.parentNode==e?img.src:""}}},{tag:"img[src]",getAttrs:function(e){return{src:e.src||""}}}],toDOM:function(e){return["figure",["img",{src:e.attrs.src}],["figcaption",0]]},draggable:!0,group:"block"}}},{key:"plugins",get:function(){return[new j.h({props:{decorations:function(e){var t=e.doc,n=e.selection,r=[];return t.forEach(function(e,t){if("image"===e.type.name){var n=_.Decoration.node(t,t+e.nodeSize,{class:e.content.size>0?"has-caption":"no-caption","data-empty-text":"Add image caption"});r.push(n)}}),t.nodesBetween(n.from,n.to,function(e,t){e.isBlock&&r.push(_.Decoration.node(t,t+e.nodeSize,{class:"in-selection"}))}),_.DecorationSet.create(t,r)}}})]}}]),t}(j.g),C=(n(91),n(376),n(666)),M=n(685);function D(e){var t=[],n=e.node.attrs.lang;if(e.node.nodeSize<=2)return t;if(t.push(_.Decoration.widget(e.pos+1,function(view){var select=document.createElement("select"),t=function(e){var option=document.createElement("option");option.value=e,option.appendChild(document.createTextNode(e)),select.appendChild(option)};t("text"),M.a.listLanguages().forEach(t),select.value=n||"text",select.onchange=function(){var tr=view.state.tr.setNodeMarkup(e.pos,void 0,{lang:select.value});view.dispatch(tr)};var r=document.createElement("div");return r.className="lang-select",r.appendChild(select),select})),!n||!M.a.getLanguage(n))return t;t.push(_.Decoration.node(e.pos,e.pos+e.node.nodeSize,{class:"hljs"}));var r=M.a.highlight(n,e.node.textContent),o=e.pos+1;return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=!0,l=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var v=h.value,m=r.concat(v.properties?v.properties.className:[]);if(v.children)e(v.children,n,m);else{var y=o,k=y+v.value.length;o=k,m.length>0&&n.push(_.Decoration.inline(y,k,{class:m.join(" ")}))}}}catch(e){l=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(l)throw d}}}(r.value,t),t}function E(e){var t=[];return e.forEach(function(e,n){"code_block"===e.type.name&&t.push({node:e,pos:n})}),t}var $=new O.Plugin({state:{init:function(e,t){var n=E(t.doc),r=_.DecorationSet.create(t.doc,n.flatMap(D));return{codeBlocks:n,decorations:r}},apply:function(tr,e){if(!tr.docChanged)return e;var t,n=!1,r=E(tr.doc);if(r.length!==e.codeBlocks.length)n=!0;else{var o=!0,c=!1,l=void 0;try{for(var d,h=function(){var e=d.value,t=tr.doc.nodeAt(tr.mapping.map(e.pos)),o=r.find(function(b){return b.node===t});if(!o||!o.node.eq(e.node))return n=!0,"break"},f=e.codeBlocks[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){if("break"===h())break}}catch(e){c=!0,l=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw l}}}return t=n?_.DecorationSet.create(tr.doc,r.flatMap(D)):e.decorations.map(tr.mapping,tr.doc),{codeBlocks:r,decorations:t}}},props:{decorations:function(e){return this.getState(e).decorations}}}),z=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return Object(C.p)(t,n.nodes.paragraph)}}},{key:"keys",value:function(e){var t=e.type;return{"Shift-Ctrl-\\":Object(C.k)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.o)(/^```$/,t)]}},{key:"name",get:function(){return"code_block"}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,attrs:{lang:{default:null}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){return{lang:e.getAttribute("data-lang")}}}],toDOM:function(e){return["pre",e.attrs,["code",0]]}}}},{key:"plugins",get:function(){return[$]}}]),t}(j.g),R=(n(275),n(192)),I=n(45),P=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(e){return Object(C.p)(t,n.nodes.paragraph,e)}}},{key:"keys",value:function(e){var t=e.type;return this.levels.reduce(function(e,n){return Object(I.a)({},e,Object(R.a)({},"Shift-Ctrl-".concat(n),Object(C.k)(t,{level:n})))},{})}},{key:"inputRules",value:function(e){var t=e.type;return this.levels.map(function(e){return Object(C.o)(new RegExp("^(#{1,".concat(e,"})\\s$")),t,function(){return{level:e}})})}},{key:"name",get:function(){return"heading"}},{key:"levels",get:function(){return[1,2]}},{key:"schema",get:function(){return{attrs:{level:{default:1}},content:"text*",marks:"",group:"block",defining:!0,draggable:!1,parseDOM:this.levels.map(function(e){return{tag:"h".concat(e),attrs:{level:e}}}),toDOM:function(e){return["h".concat(e.attrs.level),0]}}}},{key:"plugins",get:function(){return[new j.h({props:{decorations:function(e){var title,t=e.doc,n=(e.plugins,[]),r=!1;return t.forEach(function(e,t){if(title||r)return!1;"heading"===e.type.name?title={node:e,pos:t}:"image"!==e.type.name&&(r=!0)}),title&&n.push(_.Decoration.node(title.pos,title.pos+title.node.nodeSize,{class:"is-title"})),_.DecorationSet.create(t,n)}}})]}}]),t}(j.g),S=n(677),L=n(168),A=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},V=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).apply(this,arguments))).linkback=null,e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"nodeUpdate",value:function(){this.linkback=L.b.fromJSON({from:null,to:null,error:null,link:{id:0,from:{author:"dummy",slug:"dummy"},to:this.node.attrs.to,flags:0}}),this.linkback.resolve({to:!0,from:!1})}},{key:"item",get:function(){return this.linkback?this.linkback.to:null}}]),t}(m.c);A([Object(m.b)()],V.prototype,"selected",void 0),A([Object(m.b)()],V.prototype,"node",void 0),A([Object(m.b)()],V.prototype,"view",void 0),A([Object(m.b)()],V.prototype,"getPos",void 0),A([Object(m.d)("node",{immediate:!0})],V.prototype,"nodeUpdate",null);var H=V=A([Object(m.a)({components:{InlinePostPreview:S.a}})],V),B=(n(781),n(29)),N=Object(B.a)(H,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dc-editor-linkref",class:{selected:this.selected}},[this.item?t("inline-post-preview",{attrs:{item:this.item}}):t("span",[this._v("Loading")])],1)},[],!1,null,null,null).exports,U=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type;return function(e){return function(n,r){var o=n.selection,c=o.$cursor?o.$cursor.pos:o.$to.pos,l=t.create(e);r(n.tr.insert(c,l))}}}},{key:"name",get:function(){return"linkref"}},{key:"schema",get:function(){return{attrs:{to:{}},group:"block",inline:!1,draggable:!0,atom:!0,parseDOM:[{tag:"div.dc-editor-linkref",getAttrs:function(e){return{to:Object(k.i)(e.textContent)}}}],toDOM:function(e){return["div",{class:"dc-editor-linkref"},Object(k.c)(e.attrs.to)]}}}},{key:"view",get:function(){return N}}]),t}(j.g),F=n(676),T=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type;return function(e){return e.href?Object(C.t)(t,e):Object(C.i)(t)}}},{key:"pasteRules",value:function(e){var t=e.type;return[Object(C.h)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/g,t,function(e){return{href:e}})]}},{key:"name",get:function(){return"link"}},{key:"schema",get:function(){return{excludes:"_",attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",Object(I.a)({},e.attrs,{class:"dc-editor-link",rel:"noopener noreferrer nofollow"}),0]}}}},{key:"plugins",get:function(){return[new O.Plugin({props:{handleClickOn:function(view,e,t,n,r){if(r.altKey&&r.target instanceof HTMLAnchorElement){var o=view.state.schema,c=Object(F.a)(view.state,o.marks.link);if(c.href&&"#"!==c.href[0])return r.stopPropagation(),window.open(c.href),!0}return!1}},view:function(e){var t=function(t){t.altKey&&e.dom.classList.add("alt-pressed")},n=function(){e.dom.classList.remove("alt-pressed")};window.addEventListener("keydown",t),window.addEventListener("keyup",n);return{destroy:function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}}}})]}}]),t}(j.f),W=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-`":Object(C.r)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return Object(C.r)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.e)(/(?:`)([^`]+)(?:`)$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[Object(C.f)(/(?:`)([^`]+)(?:`)/g,t)]}},{key:"name",get:function(){return"code"}},{key:"schema",get:function(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}}}]),t}(j.f),G=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-b":Object(C.r)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return Object(C.r)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.e)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[Object(C.f)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}},{key:"name",get:function(){return"bold"}},{key:"schema",get:function(){return{excludes:"code link",parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}}}}]),t}(j.f),J=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-i":Object(C.r)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return Object(C.r)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.e)(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[Object(C.f)(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)/g,t)]}},{key:"name",get:function(){return"italic"}},{key:"schema",get:function(){return{excludes:"code link",parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}}}}]),t}(j.f),Y=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-d":Object(C.r)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return Object(C.r)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.e)(/~([^~]+)~$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[Object(C.f)(/~([^~]+)~/g,t)]}},{key:"name",get:function(){return"strike"}},{key:"schema",get:function(){return{excludes:"code link",parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e}}],toDOM:function(){return["s",0]}}}}]),t}(j.f),Z=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type;return function(){return function(e,n){return n(e.tr.replaceSelectionWith(t.create()))}}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.g)(/^(?:---|___\s|\*\*\*\s)$/,t)]}},{key:"name",get:function(){return"horizontal_rule"}},{key:"schema",get:function(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}}}]),t}(j.g),K=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"keys",value:function(e){var t=e.type;return{Enter:Object(C.m)(t),Tab:Object(C.l)(t),"Shift-Tab":Object(C.d)(t)}}},{key:"name",get:function(){return"list_item"}},{key:"schema",get:function(){return{content:"paragraph",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}}}}]),t}(j.g),Q=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return Object(C.q)(t,n.nodes.list_item)}}},{key:"keys",value:function(e){var t=e.type,n=e.schema;return{"Shift-Ctrl-9":Object(C.q)(t,n.nodes.list_item)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.u)(/^(\d+)\.\s$/,t,function(e){return{order:+e[1]}},function(e,t){return t.childCount+t.attrs.order===+e[1]})]}},{key:"name",get:function(){return"ordered_list"}},{key:"schema",get:function(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}}}]),t}(j.g),X=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return Object(C.q)(t,n.nodes.list_item)}}},{key:"keys",value:function(e){var t=e.type,n=e.schema;return{"Shift-Ctrl-8":Object(C.q)(t,n.nodes.list_item)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(C.u)(/^\s*([-+*])\s$/,t)]}},{key:"name",get:function(){return"bullet_list"}},{key:"schema",get:function(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}}}]),t}(j.g),ee=n(57),te=n(49),ne=n(667);function re(e){te.equal(e.type.name,"doc","must be root node");var t={content:[]};e.forEach(function(e){switch(e.type.name){case"paragraph":t.content.push(["paragraph",{content:ie(e)}]);break;case"image":t.content.push(["image",{src:e.attrs.src,caption:ie(e),layout:1}]);break;case"heading":t.content.push(["heading",{value:e.textContent,level:e.attrs.level}]);break;case"code_block":t.content.push(["code_block",{lang:e.attrs.lang,code:e.textContent}]);break;case"linkref":t.content.push(["linkref",{to:e.attrs.to}]);break;case"horizontal_rule":t.content.push(["divider",{}]);break;case"bullet_list":case"ordered_list":var n=[];e.forEach(function(e){n.push({content:ie(e.firstChild)})}),t.content.push(["list",{items:n,type:"bullet_list"===e.type.name?0:1}]);break;default:console.warn("encountered unknown block node: ".concat(e.type.name),e)}});for(var n=t.content.length-1;"paragraph"===t.content[n][0]&&0===t.content[n][1].content.length;)t.content.pop(),n--;return t}function ie(e){var t=[];return e.forEach(function(e){switch(e.type.name){case"text":var n=e.marks.map(function(mark){switch(mark.type.name){case"link":return["link",{href:mark.attrs.href||"",title:""}];default:return[mark.type.name,{}]}});t.push(["text",{value:e.text||"",marks:n}]);break;case"hard_break":t.push(["hard_break",{}]);break;default:console.warn("encountered unknown inline node: ".concat(e.type.name),e)}}),t}function ae(e,t){var content=[],n=!0,r=!1,o=void 0;try{for(var c,l=e.content[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var d=Object(ee.a)(c.value,2),h=d[0],data=d[1];switch(h){case"paragraph":var f=data;content.push(t.nodes.paragraph.create({},oe(f.content,t)));break;case"heading":var v=data,m=v.value.length>0?[t.text(v.value)]:[];content.push(t.nodes.heading.create({level:v.level},m));break;case"image":var image=data;content.push(t.nodes.image.create({src:image.src},oe(image.caption,t)));break;case"code_block":var y=data,k=y.code.length>0?[t.text(y.code)]:[];content.push(t.nodes.code_block.create({lang:y.lang},k));break;case"linkref":var O=data;content.push(t.nodes.linkref.create({to:O.to}));break;case"divider":content.push(t.nodes.horizontal_rule.create({}));break;case"list":var j=data,w=0===j.type?"bullet_list":"ordered_list",_=j.items.map(function(e){var p=t.nodes.paragraph.create({},oe(e.content,t));return t.nodes.list_item.create({},[p])});content.push(t.nodes[w].create({},_));break;default:console.warn("encountered unknown block: ".concat(h),data)}}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t.nodes.doc.create({},content)}function oe(content,e){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=content[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var d=Object(ee.a)(c.value,2),h=d[0],data=d[1];switch(h){case"text":var text=data,f=text.marks.map(function(t){var n=Object(ee.a)(t,2),r=n[0],o=n[1];return e.mark(r,o)});t.push(e.text(text.value,f));break;case"hard_break":t.push(e.nodes.hard_break.create());break;default:console.warn("encountered unknown inline: ".concat(h),data)}}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return ne.Fragment.fromArray(t)}var se=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M10.808 18.923H5.962a4.962 4.962 0 0 1 0-9.923h4.846c2.41 0 4.42 1.72 4.868 4H13.61c-.4-1.164-1.503-2-2.802-2H5.962a2.962 2.962 0 1 0 0 5.923h4.846c.845 0 1.608-.354 2.148-.923h2.377a4.963 4.963 0 0 1-4.525 2.923z",fill:"#000"}}),t("path",{attrs:{d:"M12.88 5h4.846a4.962 4.962 0 0 1 0 9.923H12.88A4.963 4.963 0 0 1 8.355 12h2.377c.54.569 1.302.923 2.148.923h4.846a2.962 2.962 0 0 0 0-5.923H12.88a2.963 2.963 0 0 0-2.802 2H8.01c.448-2.28 2.458-4 4.869-4z",fill:"#000"}})])},[],!1,null,null,null).exports,ce=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M6 19.546h6.214c3.268 0 5.008-1.705 5.008-4.02 0-2.152-1.542-3.452-3.196-3.53v-.142c1.512-.341 2.627-1.414 2.627-3.125 0-2.18-1.619-3.729-4.83-3.729H6v14.546zm3.075-2.515v-3.863h2.578c1.478 0 2.394.852 2.394 2.052 0 1.094-.746 1.811-2.465 1.811H9.075zm0-5.944V7.486h2.337c1.364 0 2.138.703 2.138 1.754 0 1.15-.938 1.847-2.195 1.847h-2.28z",fill:"#000"}})])},[],!1,null,null,null).exports,le=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.707 6l1.414 1.414-4.293 4.293L10.121 16l-1.414 1.414L3 11.707 8.707 6zm7.414 0l5.707 5.707-5.707 5.707L14.707 16 19 11.707l-4.293-4.293L16.121 6z",fill:"#000"}})])},[],!1,null,null,null).exports,ue=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M14.297 5h-2.195L9.687 19.546h2.195L14.297 5z",fill:"#000"}})])},[],!1,null,null,null).exports,de=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M3.266 19H6.34v-6.008h6.243V19h3.068V4.455h-3.068v6.001H6.34V4.455H3.266V19zM20.5 11.727h-1.482c-.017.444-.642 1.2-1.576 1.2v1.222c.802 0 1.324-.298 1.48-.54h.068V19h1.51v-7.273z",fill:"#000"}})])},[],!1,null,null,null).exports,he=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M4 18h2.364v-4.544h4.798V18h2.358V7h-2.358v4.539H6.364V7H4v11zM15.015 18H19v-.95h-2.282v-.038l.822-.787c.985-.886 1.359-1.405 1.356-2.108-.005-.954-.764-1.692-1.97-1.692-1.171 0-1.995.69-1.993 1.77h1.122c0-.53.35-.85.863-.85.494 0 .865.302.867.785-.002.438-.283.747-.78 1.22l-1.99 1.812V18z",fill:"#000"}})])},[],!1,null,null,null).exports,pe=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.8 6H4.2c-.593 0-.918.002-1.15.02l-.027.003-.002.026C3 6.282 3 6.607 3 7.2v9.6c0 .593.002.918.02 1.15l.003.027.026.002C3.282 18 3.607 18 4.2 18h15.6c.593 0 .918-.002 1.15-.02l.027-.003.002-.026c.02-.233.021-.558.021-1.151V7.2c0-.593-.002-.918-.02-1.15l-.003-.027a2.2 2.2 0 0 0-.026-.002C20.718 6 20.393 6 19.8 6zM1.218 5.092C1 5.52 1 6.08 1 7.2v9.6c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874C2.52 20 3.08 20 4.2 20h15.6c1.12 0 1.68 0 2.108-.218a2 2 0 0 0 .874-.874C23 18.48 23 17.92 23 16.8V7.2c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C21.48 4 20.92 4 19.8 4H4.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874z",fill:"#000"}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21 18.067v-2.093l-1.385-.9-2.407 1.565-7.747-6.267L3 15.6v2.468h18zM1 14.644L9.461 7.8l7.875 6.37 2.28-1.481 3.384 2.2v3.178a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3.423z",fill:"#000"}}),t("path",{attrs:{d:"M19 9.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z",fill:"#000"}})])},[],!1,null,null,null).exports,fe=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.914 11.707h-10.5v-2h10.5a4.5 4.5 0 1 1 0 9h-4.772v-2h4.772a2.5 2.5 0 0 0 0-5z",fill:"#000"}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.828 10.707l3.293-3.293L7.707 6 3 10.707l4.707 4.707L9.121 14l-3.293-3.293z",fill:"#000"}})])},[],!1,null,null,null).exports,ve=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M16.648 9.02h-2.116c-.156-1.342-1.342-2.124-3.011-2.124-1.79 0-2.92.917-2.92 2.152-.004.824.524 1.347 1.191 1.697h-3.02a3.382 3.382 0 0 1-.358-1.569C6.414 6.67 8.651 5 11.57 5c2.955 0 5.014 1.69 5.078 4.02zM14.382 14.745a1.6 1.6 0 0 1 .292.958c0 1.42-1.356 2.358-3.224 2.358-1.69 0-3.097-.753-3.225-2.337H6.023c.142 2.635 2.18 4.262 5.44 4.262 3.417 0 5.384-1.797 5.384-4.262 0-.355-.043-.68-.122-.98h-2.343zM4 11.744h15v2H4v-2z",fill:"#000"}})])},[],!1,null,null,null).exports,ge=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23 13H1v-2h22v2z",fill:"#000"}})])},[],!1,null,null,null).exports,be=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 6h12v2H8V6zM4 6h2v2H4V6zm8 6h8v2h-8v-2zm-4 0h2v2H8v-2zm4 6h8v2h-8v-2zm-4 0h2v2H8v-2z",fill:"#000"}})])},[],!1,null,null,null).exports,me=Object(B.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[t("path",{attrs:{d:"M6 5H4.414C4.407 5.466 3.8 6.022 3 6.022v1.143c.73 0 1.182-.237 1.345-.445h.062V11H6V5zM9.11 19H13v-1.153h-2.047v-.038l.638-.653c.932-.91 1.312-1.483 1.309-2.274C12.892 13.815 12.16 13 10.958 13c-1.163 0-1.96.754-1.958 1.96h1.206c-.003-.538.308-.844.75-.844.425 0 .748.297.748.786 0 .442-.259.751-.677 1.179L9.11 17.97V19z",fill:"#000"}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 7h12v2H9V7zM16 15h5v2h-5v-2z",fill:"#000"}})])},[],!1,null,null,null).exports,ye=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},ke=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"icon",get:function(){return"icon-"+this.type}},{key:"tooltipLabel",get:function(){return this.label?this.label:this.type[0].toUpperCase()+this.type.slice(1)}}]),t}(m.c);ye([Object(m.b)({type:String,required:!0})],ke.prototype,"type",void 0),ye([Object(m.b)({type:String})],ke.prototype,"label",void 0),ye([Object(m.b)({default:!1,type:Boolean})],ke.prototype,"isActive",void 0);var Oe=ke=ye([Object(m.a)({components:{IconBold:ce,IconLink:se,IconCode:le,IconItalic:ue,IconHeading:de,IconSubheading:he,IconImage:pe,IconLinkback:fe,IconStrike:ve,IconDivider:ge,IconList:be,IconListnumber:me}})],ke),je=(n(782),Object(B.a)(Oe,function(){var e=this.$createElement,t=this._self._c||e;return t("span",this._g({staticClass:"dc-editor-button",class:{"is-active":this.isActive}},this.$listeners),[t("b-tooltip",{attrs:{type:"is-black",label:this.tooltipLabel}},[t("b-button",[t(this.icon,{tag:"component"})],1)],1)],1)},[],!1,null,null,null).exports),we=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},_e=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).apply(this,arguments))).inputValue=e.value,e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"inputUpdated",value:function(){this.$emit("input",this.inputValue)}}]),t}(m.c);we([Object(m.b)({type:String})],_e.prototype,"value",void 0),we([Object(m.d)("inputValue")],_e.prototype,"inputUpdated",null);var xe=_e=we([Object(m.a)({components:{}})],_e),input=(n(783),Object(B.a)(xe,function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})},[],!1,null,null,null).exports),Ce=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Me=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"bubbleMenuActive",value:function(menu,e){return menu.isActive&&!e.code_block()&&!e.linkref()}},{key:"bubbleMenuButtons",value:function(e,t,menu,n){var r=this,o=[],c=t.paragraph(),l=t.image();return(c||l)&&(o.push({type:"bold",active:t.bold(),action:e.bold}),o.push({type:"italic",active:t.italic(),action:e.italic}),o.push({type:"strike",active:t.strike(),action:e.strike}),o.push({type:"link",active:t.link(),action:function(){return r.insertLink(e,n)}}),l||o.push({type:"code",active:t.code(),action:e.code})),!c&&!t.heading()||t.list_item()||(o.push({type:"heading",active:t.heading({level:1}),action:function(){return e.heading({level:1})}}),o.push({type:"subheading",active:t.heading({level:2}),action:function(){return e.heading({level:2})}})),o}},{key:"insertLink",value:function(e,t){var n=t("link").href||"";this.$dialog.prompt({message:n.length>0?"Edit link":"Insert link",inputAttrs:{placeholder:"URL",value:n,minlength:0,required:!1},onConfirm:function(t){e.link({href:t})}})}},{key:"getContent",value:function(){return re(this.editor.state.doc)}},{key:"setContent",value:function(e){if(e){var t=O.EditorState.create({schema:this.editor.state.schema,doc:ae(e,this.editor.state.schema),plugins:this.editor.state.plugins});this.editor.view.updateState(t)}else this.editor.setContent(null)}},{key:"handleUpdate",value:function(e){e.getDocument=function(){return re(e.state.doc)},this.$emit("update",e)}},{key:"handleClick",value:function(view,e,t,n,r,o){if("image"!==t.type.name)return!1;if(e!==n+1)return!1;var c=r.target;if(c&&"FIGCAPTION"===c.tagName)return!1;var tr=view.state.tr.setSelection(new O.NodeSelection(view.state.doc.resolve(n)));return view.dispatch(tr),!0}},{key:"insertNewline",value:function(){var s=this.editor.state,e=s.schema.nodes.paragraph.createAndFill(),tr=s.tr.insert(s.doc.content.size,e);tr.setSelection(new O.TextSelection(tr.doc.resolve(s.doc.content.size+1))),this.editor.dispatchTransaction(tr),this.editor.focus()}},{key:"insertImage",value:function(){var e=this;this.$dialog.prompt({message:"Insert image",inputAttrs:{placeholder:"Image URL"},onConfirm:function(t){e.editor.commands.image({src:t})}})}},{key:"insertLinkref",value:function(){var e=this;this.$dialog.prompt({message:"Insert linkback",inputAttrs:{placeholder:"Post URL or permlink (author/slug)"},onConfirm:function(t){var n=/(x\/)?([a-z1-5-.]{1,13}\/[a-z1-5-.]{1,13})$/.exec(t);n?e.editor.commands.linkref({to:Object(k.i)(n[2])}):e.$toast.open({message:"Invalid permlink or URL",type:"is-danger"})}})}},{key:"created",value:function(){this.editor=new j.a({autoFocus:!0,content:null,extensions:[new U,new P,new x,new G,new W,new J,new z,new w.a,new Y,new w.b,new T,new Z,new K,new Q,new X,new w.c({emptyClass:"is-empty",emptyNodeText:"Write something",showOnlyWhenEditable:!0})],emptyDocument:{type:"doc",content:[{type:"heading",attrs:{level:1}}]},onUpdate:this.handleUpdate.bind(this)}),this.editor.view.setProps({handleClickOn:this.handleClick.bind(this)})}},{key:"beforeDestroy",value:function(){this.editor.destroy()}}]),t}(m.c),De=Me=Ce([Object(m.a)({components:{DcEditorButton:je,DcEditorInput:input,EditorContent:j.b,EditorFloatingMenu:j.c,EditorMenuBubble:j.d}})],Me),Ee=(n(788),Object(B.a)(De,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dc-editor"},[n("editor-floating-menu",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.commands,menu=(t.isActive,t.menu);return n("div",{staticClass:"dc-editor-button-menu dc-editor-floating-menu",class:{"is-active":menu.isActive},style:"top: "+menu.top+"px"},[n("dc-editor-button",{attrs:{type:"heading"},on:{click:function(e){return r.heading({level:1})}}}),e._v(" "),n("dc-editor-button",{attrs:{type:"subheading"},on:{click:function(e){return r.heading({level:2})}}}),e._v(" "),n("dc-editor-button",{attrs:{type:"linkback"},on:{click:e.insertLinkref}}),e._v(" "),n("dc-editor-button",{attrs:{type:"image"},on:{click:e.insertImage}}),e._v(" "),n("dc-editor-button",{attrs:{type:"list",label:"Bullet list"},on:{click:r.bullet_list}}),e._v(" "),n("dc-editor-button",{attrs:{type:"listnumber",label:"Ordered list"},on:{click:r.ordered_list}}),e._v(" "),n("dc-editor-button",{attrs:{type:"divider"},on:{click:r.horizontal_rule}}),e._v(" "),n("dc-editor-button",{attrs:{type:"code",label:"Code Block"},on:{click:r.code_block}})],1)}}])}),e._v(" "),n("editor-menu-bubble",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.commands,o=t.isActive,menu=t.menu,c=t.getMarkAttrs;return n("div",{staticClass:"dc-editor-button-menu dc-editor-menu-bubble",class:{"is-active":e.bubbleMenuActive(menu,o)},style:"left: "+menu.left+"px; bottom: "+menu.bottom+"px;"},e._l(e.bubbleMenuButtons(r,o,menu,c),function(button){return n("dc-editor-button",{key:button.type,attrs:{type:button.type,"is-active":button.active},on:{click:button.action}})}),1)}}])}),e._v(" "),n("editor-content",{staticClass:"dc-editor-content dc-post-body content",attrs:{editor:e.editor}}),e._v(" "),n("div",{staticClass:"dc-editor-bottom-margin",on:{click:e.insertNewline}})],1)},[],!1,null,null,null).exports),$e=n(764),ze=n(100),Re=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Ie=Object(y.d)("user"),Pe=Object(y.d)("page");function Se(e){return new Promise(function(t,n){var image=window.document.createElement("img");image.onerror=n,image.onload=function(){t({width:image.naturalWidth,height:image.naturalHeight})},image.src=e})}var Le=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).apply(this,arguments))).getDocument=function(){return e.editor.getContent()},e.titleOverride="",e.summaryOverride="",e.imageEnabled=!0,e.imageOverride="",e.selectedCategory="",e.customCategory="",e.useCustomCategory=!1,e.imageLoadFailed=!1,e.publishModalVisible=!1,e.isPublishing=!1,e.publishMessage="",e.placegenDone=!1,e.placegenRunning=!1,e.placegenImage=null,e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"mounted",value:function(){this.draft&&this.editor.setContent(this.draft)}},{key:"handleUpdate",value:function(e){this.getDocument=e.getDocument,this.saveDraft(e)}},{key:"saveDraft",value:function(e){this.setDraft(this.doc)}},{key:"onImageEnabled",value:function(){this.imageEnabled?this.imageOverride="":this.imageOverride="Preview image disabled"}},{key:"categorySelectionUpdated",value:function(){this.useCustomCategory="custom-category"==this.selectedCategory}},{key:"categoriesUpdated",value:function(){!this.selectedCategory&&this.categories.length>0&&(this.selectedCategory=this.categories[0])}},{key:"customCategoryUpdated",value:function(e,t){""===e&&1!==t.length&&(this.selectedCategory=this.categories[0],this.useCustomCategory=!1)}},{key:"checkImages",value:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishModalVisible){e.next=3;break}return this.imageLoadFailed=!1,e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.all(this.uniqueImages.map(k.g));case 6:this.imageLoadFailed=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.imageLoadFailed=!0;case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"checkOverriddenImage",value:function(){this.checkImages()}},{key:"placegenResult",value:function(e){this.$emit("placegen",e)}},{key:"placegenError",value:function(e){this.$emit("placegen-error",e)}},{key:"showPublishModal",value:function(){this.canPublish&&(this.publishModalVisible=!0)}},{key:"publish",value:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n,r,o,c,l,d,image,h,f,v,m=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canPublish&&!this.isPublishing){e.next=2;break}return e.abrupt("return");case 2:if(!(this.warnings.length>0)||confirm("You have unresolved warnings. Publish anyway?")){e.next=4;break}return e.abrupt("return");case 4:return this.publishMessage="Preparing to publish...",this.isPublishing=!0,this.placegenDone=!1,e.next=9,this.getSlug(this.title);case 9:t=e.sent,n={image:void 0,summary:void 0,image_info:[]},this.image&&(n.image=this.image),this.summaryOverride&&(n.summary=this.summaryOverride),this.publishMessage="Generating placeholders...",r=!0,o=!1,c=void 0,e.prev=17,l=this.uniqueImages[Symbol.iterator]();case 19:if(r=(d=l.next()).done){e.next=47;break}if(!(image=d.value).startsWith("data")){e.next=23;break}return e.abrupt("continue",44);case 23:return this.placegenImage=image,e.prev=24,e.next=27,Object(k.m)(this,"placegen");case 27:h=e.sent,n.image_info.push({key:image,value:{width:h.size.width,height:h.size.height,placeholder:["geometrize_triangles",h.placeholder]}}),e.next=44;break;case 31:return e.prev=31,e.t0=e.catch(24),console.warn("unable to generate placeholder",e.t0),e.prev=34,e.next=37,Se(image);case 37:f=e.sent,n.image_info.push({key:image,value:{width:f.width,height:f.height,placeholder:["color",{r:200,g:200,b:200}]}}),e.next=44;break;case 41:e.prev=41,e.t1=e.catch(34),console.warn("unable to measure image",e.t1);case 44:r=!0,e.next=19;break;case 47:e.next=53;break;case 49:e.prev=49,e.t2=e.catch(17),o=!0,c=e.t2;case 53:e.prev=53,e.prev=54,r||null==l.return||l.return();case 56:if(e.prev=56,!o){e.next=59;break}throw c;case 59:return e.finish(56);case 60:return e.finish(53);case 61:this.placegenDone=!0,n.image||n.summary||0!==n.image_info.length||(n=void 0),v=function(e){m.publishMessage=e},this.publishMessage="Publishing post...",this.$api.publish(v,this.wallet,this.title,t,this.editor.getContent(),this.category,this.linkrefs,n).then(function(e){m.publishMessage="Post published! Redirecting...",m.titleOverride="",m.imageOverride="",m.summaryOverride="",m.editor.setContent(null),m.setDraft(null),m.$router.push("/x/".concat(m.accountName,"/").concat(t))}).catch(function(e){throw m.isPublishing=!1,e});case 66:case"end":return e.stop()}},e,this,[[17,49,53,61],[24,31],[34,41],[54,,56,60]])}));return function(){return e.apply(this,arguments)}}()},{key:"getSlug",value:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(title){var t,n,r,c,l,p,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:title=title.toLowerCase().replace(/[^a-z1-5]/g," ").replace(/\s\s+/g," ").trim().replace(/\s/g,"."),t=function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(s){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s.length>1,!e.t0){e.next=6;break}return e.next=4,d.$api.getPostRef(d.accountName,s);case 4:e.t1=e.sent,e.t0=null==e.t1;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n=Object(k.k)(title),r=0,c=["1","2","3","4","5","a","b","c","d","e","f","g","h","i","j"];case 5:return e.next=7,t(n);case 7:if(e.sent){e.next=14;break}l=".".repeat(1+r/c.length),p=c[r%c.length],n=Object(k.k)("".concat(p).concat(l).concat(title)),r++,e.next=5;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"editor",get:function(){return this.$refs.editor}},{key:"doc",get:function(){return this.getDocument()}},{key:"title",get:function(){return this.titleOverride||ze.f(this.doc)}},{key:"summary",get:function(){return this.summaryOverride||ze.e(this.doc)}},{key:"image",get:function(){return this.imageEnabled?this.imageOverride||this.extractedImage:null}},{key:"allImages",get:function(){return ze.c(this.doc).map(function(img){return img.src})}},{key:"uniqueImages",get:function(){var e=new Set(this.allImages);return this.image&&e.add(this.image),Object(r.a)(e)}},{key:"extractedImage",get:function(){return this.allImages[0]||null}},{key:"imagePlaceholder",get:function(){return this.extractedImage?this.extractedImage:"Enter image URL"}},{key:"linkrefs",get:function(){return ze.d(this.doc).map(function(e){return e.to})}},{key:"category",get:function(){return this.customCategory||this.selectedCategory}},{key:"warnings",get:function(){var e=[];return this.imageLoadFailed&&e.push("One or more images failed to load"),"No summary"===this.summary&&e.push("Your post does not have a summary"),e}},{key:"canPublish",get:function(){return!0}},{key:"previewItem",get:function(){return L.d.fromJSON({ref:{category:this.category,timestamp:(new Date).toISOString().slice(0,-1),options:0,tx:{block_num:0,transaction_id:"beefface"},permlink:{author:this.accountName,slug:Object(k.k)(this.title)},extensions:[]},preview:{title:this.title,author:this.accountName,summary:this.summary,image:this.image,imageInfo:null},error:null})}}]),t}(m.c);Re([y.b],Le.prototype,"setDraft",void 0),Re([Pe.Getter],Le.prototype,"categories",void 0),Re([y.c],Le.prototype,"draft",void 0),Re([Ie.Getter],Le.prototype,"accountName",void 0),Re([Ie.Getter],Le.prototype,"authenticated",void 0),Re([Ie.Getter],Le.prototype,"wallet",void 0),Re([Object(k.a)(1e3)],Le.prototype,"saveDraft",null),Re([Object(m.d)("imageEnabled")],Le.prototype,"onImageEnabled",null),Re([Object(m.d)("selectedCategory")],Le.prototype,"categorySelectionUpdated",null),Re([Object(m.d)("categories",{immediate:!0})],Le.prototype,"categoriesUpdated",null),Re([Object(m.d)("customCategory")],Le.prototype,"customCategoryUpdated",null),Re([Object(m.d)("publishModalVisible")],Le.prototype,"checkImages",null),Re([Object(m.d)("imageOverride")],Le.prototype,"checkOverriddenImage",null);var Ae=Le=Re([Object(m.a)({head:{title:"Write - Decentium"},components:{DcEditor:Ee,InlinePostPreview:S.a,Placegen:$e.a},provide:{imageInfo:[]}})],Le),Ve=(n(791),Object(B.a)(Ae,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dc-write"},[n("div",{staticClass:"dc-container"},[n("dc-editor",{directives:[{name:"show",rawName:"v-show",value:e.authenticated,expression:"authenticated"}],ref:"editor",on:{update:e.handleUpdate}})],1),e._v(" "),n("div",{staticClass:"dc-bottom-bar"},[n("div",{staticClass:"dc-write-actions"},[n("b-button",{attrs:{disabled:!e.canPublish,type:"is-dark"},on:{click:e.showPublishModal}},[e._v("Ready to publish ->")])],1)]),e._v(" "),e.authenticated?e._e():n("div",{staticClass:"container"},[e._v("\n        You must be logged in to write an article.\n    ")]),e._v(" "),e.publishModalVisible?n("b-modal",{attrs:{active:e.publishModalVisible,canCancel:!e.isPublishing,scroll:"keep"},on:{"update:active":function(t){e.publishModalVisible=t}}},[e.isPublishing?n("div",{staticClass:"publish-progress"},[e.placegenImage?n("div",{staticClass:"placegen-container",class:{visible:!e.placegenDone}},[n("placegen",{attrs:{src:e.placegenImage},on:{result:e.placegenResult,error:e.placegenError}})],1):e._e(),e._v(" "),n("progress",{staticClass:"progress is-small is-primary",attrs:{max:"100"}},[e._v(e._s(e.publishMessage))]),e._v(" "),n("p",[e._v(e._s(e.publishMessage))])]):n("div",{staticClass:"publish-modal"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column form"},[n("b-field",{attrs:{label:"Title"}},[n("b-input",{attrs:{placeholder:e.title,maxlength:"85"},model:{value:e.titleOverride,callback:function(t){e.titleOverride=t},expression:"titleOverride"}})],1),e._v(" "),n("b-field",{attrs:{label:"Category"}},[e.useCustomCategory?n("b-input",{attrs:{type:"search",placeholder:"Custom category",maxlength:"12"},model:{value:e.customCategory,callback:function(t){e.customCategory=t},expression:"customCategory"}}):n("b-select",{attrs:{expanded:""},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}},[e._l(e.categories,function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n                                "+e._s(e._f("capitalize")(t))+"\n                            ")])}),e._v(" "),n("option",{attrs:{value:"custom-category"}},[e._v("\n                                Custom category\n                            ")])],2)],1),e._v(" "),n("b-field",{attrs:{label:"Image"}},[n("div",{staticClass:"field has-addons"},[n("b-input",{attrs:{disabled:!e.imageEnabled,placeholder:e.imagePlaceholder,expanded:""},model:{value:e.imageOverride,callback:function(t){e.imageOverride=t},expression:"imageOverride"}}),e._v(" "),e.extractedImage?n("b-checkbox-button",{attrs:{type:"is-info"},model:{value:e.imageEnabled,callback:function(t){e.imageEnabled=t},expression:"imageEnabled"}},[n("span",{staticStyle:{"font-size":"140%"}},[e._v("✗")])]):e._e()],1)]),e._v(" "),n("b-field",{attrs:{label:"Summary"}},[n("b-input",{attrs:{maxlength:"140",placeholder:e.summary,type:"textarea"},model:{value:e.summaryOverride,callback:function(t){e.summaryOverride=t},expression:"summaryOverride"}})],1)],1),e._v(" "),n("div",{staticClass:"is-divider-vertical"}),e._v(" "),n("div",{staticClass:"column preview"},[n("div",[n("inline-post-preview",{attrs:{item:e.previewItem,"is-preview":""}})],1),e._v(" "),n("p",{staticClass:"info is-size-7 is-italic has-text-grey"},[e._v("\n                        This is how your article will appear in feeds, changes here does not\n                        affect your articles content.\n                    ")])])]),e._v(" "),n("div",{staticClass:"columns is-vend"},[n("div",{staticClass:"column"},[e.warnings.length>0?n("ul",{staticClass:"warnings"},e._l(e.warnings,function(t,r){return n("li",{key:r},[e._v("\n                            "+e._s(t)+"\n                        ")])}),0):e._e()]),e._v(" "),n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"buttons is-right"},[n("span",{staticClass:"button",attrs:{disabled:e.isPublishing},on:{click:function(t){e.publishModalVisible=!1}}},[e._v("Cancel")]),e._v(" "),n("span",{staticClass:"button is-primary",class:{"is-loading":e.isPublishing},attrs:{disabled:!e.canPublish},on:{click:e.publish}},[e._v("Publish")])])])])])]):e._e()],1)},[],!1,null,null,null));t.default=Ve.exports}}]);